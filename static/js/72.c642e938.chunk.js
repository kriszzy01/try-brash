"use strict";(self.webpackChunktry_brash=self.webpackChunktry_brash||[]).push([[72],{5072:function(e,n,a){a.r(n),a.d(n,{Payment:function(){return le},Transactions:function(){return fe}});var r=a(885),t=a(2791),i=a(1110),s="style_payment__vx2Ah",l="style_payment__spinner__h-AAN",c="style_payment__text__XTaGr",o="style_payment__text-container__FreL2",d="style_payment__forms__0GJNr",u="style_payment__forms-inner__UMJar",m="style_payment__forms-container__qtgix",h=a(5861),_=a(7757),p=a.n(_),x=a(5705),v=a(5239),f=a(6030),b=a(1856),j="style_validation__LK+mf",y="style_validation__form__blN3B",g="style_validation__form-title__FAvuE",N="style_validation__form-button__CFcbM",k=a(3005),C=a(1413),w=a(4942),A=a(4925),B=a(8182),S={fieldwrapper:"style_fieldwrapper__RuiXp",fieldwrapper_label:"style_fieldwrapper_label__CtTmj",fieldwrapper_error:"style_fieldwrapper_error__AnLNB"},Z=a(184),q=function(e){var n,a=e.label,r=e.children,t=e.error,i=e.className,s=e.htmlFor,l=(0,B.Z)((n={},(0,w.Z)(n,S.fieldwrapper,!0),(0,w.Z)(n,"className",i),n));return(0,Z.jsxs)("div",{className:l,children:[(0,Z.jsxs)("label",{className:S.fieldwrapper_label,htmlFor:s,children:[a,(0,Z.jsx)("div",{className:S.fieldwrapper_container,children:r})]}),t&&(0,Z.jsx)("div",{className:S.fieldwrapper_error,role:"alert","aria-label":t,children:t})]})},D="style_input__rv440",E=["type","className","id","error","label"],F=function(e){var n,a=e.type,r=void 0===a?"text":a,t=e.className,i=e.id,s=e.error,l=e.label,c=(0,A.Z)(e,E),o=(0,B.Z)((n={},(0,w.Z)(n,D,!0),(0,w.Z)(n,"className",t),n));return(0,Z.jsx)(q,{label:l,error:s,htmlFor:i,children:(0,Z.jsx)("input",(0,C.Z)((0,C.Z)({type:r},c),{},{className:o,value:c.value}))})},V=a(4569),L=a.n(V)().create({baseURL:"https://api.paystack.co",headers:{Authorization:"Bearer ".concat("sk_test_7943c5e5e52e93a9845792b9bfb0d0989cb2ea29")}}),M=a(1933),O=function(e){var n=e.account_number,a=e.bank_code;return L.get("/bank/resolve",{params:{account_number:n,bank_code:a}})},T=a(2453),z=a(2039),I=a(6454),P=function(){var e=(0,f.I0)();return(0,M.useQuery)({queryKey:["banks"],queryFn:function(){return L.get("/bank")},onSuccess:function(n){var a=n.data;return e((0,I.Eo)(a.data))},suspense:!1})},J=a(6513),R="style_autocomplete__CTAdr",G="style_option__2G9YN",Q="style_option__list__EDVuu",U=function(e){var n=e.handleClick,a=e.results;return(0,Z.jsx)(i.E.div,{initial:{scale:1.05},animate:{scale:1},className:G,"aria-expanded":!0,children:(0,Z.jsx)("ul",{role:"listbox",children:a.map((function(e,a){return(0,Z.jsx)("li",{role:"option",tabIndex:-1,className:Q,onClick:function(){return n(e.code,e.name)},children:e.name},e.id)}))})})},X=a(1857),K=["label","options","error","className","defaultValue","placeholder","id","handleClick","onChange"],W=function(e){var n=e.label,a=e.options,i=e.error,s=(e.className,e.defaultValue,e.placeholder,e.id),l=e.handleClick,c=(e.onChange,(0,A.Z)(e,K),t.useState("")),o=(0,r.Z)(c,2),d=o[0],u=o[1],m=(0,X.q)(),h=m.isOpen,_=m.handleClose,p=m.handleOpen,x=a.filter((function(e){return e.name.toLowerCase().toLowerCase().includes(d.toLowerCase())}));return(0,Z.jsxs)(q,{label:n,error:i,htmlFor:s,children:[(0,Z.jsx)("input",{type:"search","aria-label":"Search for bank","aria-controls":"options",value:d,placeholder:"eg. Access",onChange:function(e){u(e.target.value),p()},onBlur:function(){return setTimeout(_,100)},className:R,id:s}),(0,Z.jsx)(b.M,{children:h&&(0,Z.jsx)(U,{results:x,handleClick:function(e,n){l("bankCode",e),u(n)}})})]})},Y=function(e){var n=e.handleSubmit;P();var a=(0,f.v9)(T.DJ),r=(0,f.I0)(),t=(0,M.useMutation)({mutationFn:O,onError:function(e){return console.log(e)}}).mutateAsync,s=Object.values(a.banks).sort((function(e,n){return e.name.localeCompare(n.name)})),l=function(){var e=(0,h.Z)(p().mark((function e(a){var i,s,l,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.accountNumber,s=a.bankCode,e.prev=1,e.next=4,t({bank_code:s,account_number:i});case 4:l=e.sent,c=l.data,r((0,z.hv)(c.data)),n("payment"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),r((0,J.wN)({title:"Error",message:"Something went wrong. Please check your account details and try again.",variant:"error"}));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(n){return e.apply(this,arguments)}}();return(0,Z.jsx)(b.M,{children:(0,Z.jsx)(i.E.div,{initial:{x:50},animate:{x:0,transition:{}},exit:{x:-50},className:j,children:(0,Z.jsxs)("div",{className:y,children:[(0,Z.jsx)("h2",{className:g,children:"Validate Account Details"}),(0,Z.jsx)(x.J9,{initialValues:{bankCode:"",accountNumber:""},onSubmit:l,validationSchema:v.Ry({accountNumber:v.Z_().required("Account number is required").min(10,"Account number must be 8 characters or more"),bankCode:v.Z_().required("Bank is required")}),children:function(e){return(0,Z.jsxs)(x.l0,{children:[(0,Z.jsx)(W,{options:s,id:"bank",name:"bankCode",error:e.errors.bankCode,handleClick:e.setFieldValue,onBlur:e.handleBlur,label:"Beneficiary Bank",value:e.values.bankCode,placeholder:"eg. Access Bank"}),(0,Z.jsx)(F,{id:"accountnumber",name:"accountNumber",error:e.errors.accountNumber,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.accountNumber,label:"Beneficiary Account Number",placeholder:"eg. 2124859881"}),(0,Z.jsx)("div",{className:N,children:(0,Z.jsx)(k.zx,{type:"submit",isLoading:e.isSubmitting,children:"Validate"})})]})}})]})})})},H="style_payment__ISF+f",$="style_payment-back-button__gyNLX",ee="style_payment__form__VNxZz",ne="style_payment__form-account__z+RND",ae=a(3502),re=function(e){return L.post("/transferrecipient",e)},te=a(3205);function ie(e){var n=String(e);return n=(n=(n=n.split("").reverse()).reduce((function(e,a,r){var t=(r+1)%3===0&&r+1<n.length,i="".concat(e).concat(a);return t&&(i="".concat(i,",")),i}),"")).split("").reverse().join("")}var se=function(e){var n=e.handleSubmit,a=(0,X.q)(),r=a.isOpen,t=a.handleOpen,s=(0,f.v9)(T.Nx),l=(0,f.v9)(T.DJ).banks,c=function(){var e=(0,f.I0)();return(0,M.useMutation)({onError:function(){new Promise((function(n){e((0,J.wN)({message:"Error",title:"Transfer unsuccessful, please try again later",variant:"error"})),n("")}))},mutationFn:re,onSuccess:function(){new Promise((function(n){e((0,J.wN)({title:"Success!",message:"Transfer successful, please check the transactions page for details.",variant:"info"})),n(null)}))}})}(),o=c.mutateAsync,d=(0,f.I0)(),u=l[s.bankId],m=function(){var e=(0,h.Z)(p().mark((function e(a){var r,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(),r={bank_code:u.code,type:u.type,name:s.accountName,account_number:s.accountNumber,currency:u.currency,description:a.values.narration},e.next=5,o(r);case 5:(i=e.sent)&&(d((0,te.l2)((0,C.Z)((0,C.Z)({},i.data.data),{},{amount:a.values.amount}))),n("validation")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}();return(0,Z.jsx)(b.M,{children:(0,Z.jsxs)(i.E.div,{initial:{x:50},animate:{x:0},className:H,children:[(0,Z.jsx)("div",{children:(0,Z.jsx)("button",{className:$,type:"button",onClick:function(){return n("validation")},children:"Back"})}),(0,Z.jsxs)("div",{className:ee,children:[(0,Z.jsxs)("div",{className:ne,children:[(0,Z.jsxs)("p",{children:["Account Name: ",s.accountName]}),(0,Z.jsxs)("p",{children:["Bank Name: ",u.name]})]}),(0,Z.jsx)(x.J9,{initialValues:{amount:"",narration:""},onSubmit:function(){},validationSchema:v.Ry({amount:v.Rx().required("Amount is required").min(100,"Minimum amount is #100").max(1e7,"Maximum amount is #10000000"),narration:v.Z_().required("Narration is required")}),children:function(e){return(0,Z.jsxs)(x.l0,{children:[(0,Z.jsx)("div",{children:(0,Z.jsx)(F,{id:"amount",name:"amount",error:e.errors.amount,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.amount,label:"Amount: Minimum Amount: #100",type:"number",placeholder:"eg.10000"})}),(0,Z.jsx)(F,{id:"narration",name:"narration",error:e.errors.narration,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.narration,label:"Narration",type:"string",placeholder:"eg. Vacation fees"}),(0,Z.jsx)(ae.U,{triggerButton:(0,Z.jsx)(k.zx,{type:"submit",disabled:!Boolean(e.values.amount&&e.values.narration),children:"Proceed"}),confirmButton:(0,Z.jsx)(k.zx,{type:"button",variant:"danger",onClick:function(){return m(e)},isLoading:r,children:"Confirm"}),title:"Confirmation",body:"Are You sure you want transfer ".concat(ie(+e.values.amount)," to ").concat(s.accountName,"?")})]})}})]})]})})},le=function(){var e=t.useState("validation"),n=(0,r.Z)(e,2),a=n[0],h=n[1],_=function(e){return h(e)},p={validation:(0,Z.jsx)(Y,{handleSubmit:_}),payment:(0,Z.jsx)(se,{handleSubmit:_})};return(0,Z.jsxs)("div",{className:s,children:[(0,Z.jsx)("div",{className:c,children:(0,Z.jsxs)("div",{className:o,children:[(0,Z.jsxs)(i.E.h1,{initial:{opacity:0},animate:{opacity:1,transition:{duration:1.5,ease:"linear"}},children:["Pay anyone, ",(0,Z.jsx)("br",{})," anywhere."]}),(0,Z.jsxs)(i.E.p,{initial:{opacity:0},animate:{opacity:1,transition:{duration:1.5,ease:"linear"}},children:["Pay family, friends and bills for ",(0,Z.jsx)("br",{})," less-at home and abroad."]})]})}),(0,Z.jsx)(t.Suspense,{fallback:(0,Z.jsx)("div",{className:l,children:(0,Z.jsx)(k.$j,{size:"lg",variant:"light"})}),children:(0,Z.jsx)("div",{className:d,children:(0,Z.jsx)("div",{className:u,children:(0,Z.jsx)("div",{className:m,children:p[a]})})})})]})},ce="style_payments__jQ0OV",oe="style_payments__table__6a77O",de=a(3794);var ue=a.p+"static/media/archive.1ea807f7e51a45461de5af5e5770c3a6.svg",me="style_table__5J2nI",he=function(e){var n=e.data,a=e.columns;return null!==n&&void 0!==n&&n.length?(0,Z.jsx)("div",{className:me,children:(0,Z.jsxs)("table",{children:[(0,Z.jsx)("thead",{className:"bg-gray-50",children:(0,Z.jsx)("tr",{children:a.map((function(e,n){return(0,Z.jsx)("th",{scope:"col",children:e.title},e.title+n)}))})}),(0,Z.jsx)("tbody",{children:n.map((function(e,n){return(0,Z.jsx)(i.E.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{delay:.1*n}},children:a.map((function(n,a){var r=n.Cell,t=n.field,i=n.title;return(0,Z.jsx)("td",{children:r?(0,Z.jsx)(r,{entry:e}):e[t]},i+a)}))},(null===e||void 0===e?void 0:e.id)||n)}))})]})}):(0,Z.jsxs)("div",{style:{fontSize:"1.3rem"},children:[(0,Z.jsx)(de.Z,{src:ue,width:64,height:64}),(0,Z.jsx)("h4",{children:"No Transactions Found"})]})},_e=a(448),pe={dialog:"style_dialog__aJrbk","dialog-trigger":"style_dialog-trigger__-LqP1","dialog-header":"style_dialog-header__bjC5G","dialog-header-content":"style_dialog-header-content__S1Mro","dialog-section":"style_dialog-section__ud-3g","dialog-section-text":"style_dialog-section-text__AzsQ9"},xe=function(e){var n=e.trigger,a=e.id,r=(0,X.q)(),i=r.isOpen,s=r.handleClose,l=r.handleOpen,c=(0,f.v9)(T.Wp).transfers,o=t.cloneElement(n,{onClick:l}),d=c[a];return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("div",{className:pe["dialog-trigger"],children:o}),(0,Z.jsx)(k.Vq,{isOpen:i,handleClose:s,fillPage:!0,children:(0,Z.jsxs)("div",{className:pe.dialog,children:[(0,Z.jsxs)("div",{className:pe["dialog-header"],children:[(0,Z.jsxs)("div",{className:pe["dialog-header-content"],children:[(0,Z.jsx)("h2",{children:"Transaction Detail"}),(0,Z.jsx)("div",{className:pe["dialog-header-content-text"],children:(0,Z.jsxs)("p",{children:["Recipient Code: ",d.recipient_code]})})]}),(0,Z.jsx)("button",{type:"button","aria-label":"close",onClick:s,className:pe["dialog-close-button"],children:(0,Z.jsx)(de.Z,{src:_e.Z,width:32,height:32})})]}),(0,Z.jsxs)("div",{className:pe["dialog-section"],children:[(0,Z.jsx)("hr",{}),(0,Z.jsx)("h3",{children:"Description"}),(0,Z.jsxs)("div",{className:pe["dialog-section-text"],children:[(0,Z.jsxs)("p",{children:["Narration: ",d.description]}),(0,Z.jsxs)("p",{children:["Amount: ",d.amount]}),(0,Z.jsxs)("p",{children:["Currency: ",d.currency]}),(0,Z.jsxs)("p",{children:["Date: ",new Date(d.createdAt).toDateString()]}),(0,Z.jsxs)("p",{children:["Time: ",new Date(d.createdAt).toTimeString()]})]})]}),(0,Z.jsxs)("div",{className:pe["dialog-section"],children:[(0,Z.jsx)("hr",{}),(0,Z.jsx)("h3",{children:"Bank Details"}),(0,Z.jsxs)("div",{className:pe["dialog-section-text"],children:[(0,Z.jsxs)("p",{children:["Bank Name: ",d.details.bank_name]}),(0,Z.jsxs)("p",{children:["Account Holder: ",d.details.account_name]}),(0,Z.jsxs)("p",{children:["Account Number: ",d.details.account_number]})]})]})]})})]})},ve=[{title:"Name",field:"name"},{title:"Description",field:"description"},{title:"Account",field:"account"},{title:"Details",field:"details"}],fe=function(){var e=(0,f.v9)(T.Wp).transfers,n=Object.values(e).map((function(e,n){var a=e.name,r=e.details,t=e.transactionId;return{id:t,name:a,description:e.description,account:r.account_number,details:(0,Z.jsx)(xe,{trigger:(0,Z.jsx)(k.zx,{variant:"inverse",children:"View details"}),id:t})}}));return(0,Z.jsx)("div",{className:ce,children:(0,Z.jsx)("div",{className:oe,children:(0,Z.jsx)(he,{data:n,columns:ve})})})}}}]);
//# sourceMappingURL=72.c642e938.chunk.js.map